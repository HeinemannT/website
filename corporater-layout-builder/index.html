---
layout: null
permalink: /tools/corporater-layout-builder/
---
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cora's Visual Layout Designer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        brand: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
        }

        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* Smooth Transitions */
        .smooth-transition {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        .dark ::-webkit-scrollbar-thumb {
            background: #475569;
        }

        .dark ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }

        /* Grid Pattern Background */
        .bg-grid-pattern {
            background-color: #f8fafc;
            background-image: linear-gradient(#e2e8f0 1px, transparent 1px), linear-gradient(90deg, #e2e8f0 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .dark .bg-grid-pattern {
            background-color: #0f172a;
            background-image: linear-gradient(#1e293b 1px, transparent 1px), linear-gradient(90deg, #1e293b 1px, transparent 1px);
        }

        /* Glassmorphism Utilities */
        .glass-panel {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(226, 232, 240, 0.8);
        }

        .dark .glass-panel {
            background: rgba(30, 41, 59, 0.8);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
    </style>
</head>

<body
    class="h-screen flex flex-col overflow-hidden bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-200 transition-colors duration-300">

    <!-- Top Bar -->
    <header class="glass-panel h-16 px-6 flex justify-between items-center z-50 sticky top-0">
        <div class="flex items-center gap-3">
            <div
                class="w-10 h-10 bg-gradient-to-br from-indigo-500 to-indigo-700 rounded-xl flex items-center justify-center text-white shadow-lg shadow-indigo-500/30">
                <span class="font-bold text-lg">C</span>
            </div>
            <div>
                <h1 class="font-bold text-xl tracking-tight leading-none text-slate-800 dark:text-slate-100">Visual
                    Layout Designer</h1>
                <p class="text-xs text-slate-500 dark:text-slate-400 font-mono mt-0.5 uppercase tracking-wide">
                    Corporater Layout Tool</p>
            </div>
        </div>

        <div class="flex items-center gap-4">

            <!-- Mobile Strategy Selector -->
            <div
                class="hidden md:flex items-center gap-2 bg-slate-100 dark:bg-slate-800 px-3 py-1.5 rounded-lg border border-slate-200 dark:border-slate-700 group relative cursor-help transition-colors">
                <span class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Mobile Strategy</span>
                <select id="mobileStrategy" onchange="generateCode()"
                    class="bg-transparent text-xs font-bold text-indigo-600 dark:text-indigo-400 focus:outline-none cursor-pointer">
                    <option value="mirror" selected>ðŸ’» Mirror Desktop (Default)</option>
                    <option value="stack">ðŸ“± Stack (Full Width)</option>
                    <option value="grid">ðŸ“± Grid (2-Col)</option>
                </select>

                <!-- Tooltip -->
                <div
                    class="absolute top-full mt-2 right-0 w-64 bg-slate-800 text-white text-[10px] p-3 rounded shadow-xl opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50 leading-relaxed border border-slate-700">
                    <strong class="text-indigo-300 block mb-1">How Mobile layouts are calculated:</strong>
                    <ul class="list-disc pl-3 space-y-1">
                        <li><strong>Mirror:</strong> Mobile uses the exact same widths as Desktop. Best for complex
                            dashboards.</li>
                        <li><strong>Stack:</strong> Forces all containers to width 6 on mobile. Safest for readability.
                        </li>
                        <li><strong>Grid:</strong> Tries to fit two items per row (width 3) on mobile if they are small
                            enough.</li>
                    </ul>
                </div>
            </div>

            <div class="h-6 w-px bg-slate-200 dark:bg-slate-700 hidden md:block"></div>

            <div
                class="flex items-center gap-2 bg-slate-100 dark:bg-slate-800 px-3 py-1.5 rounded-lg border border-slate-200 dark:border-slate-700 transition-colors">
                <span class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Parent Context</span>
                <span class="text-xs font-mono font-bold text-indigo-400">t.</span>
                <input type="text" id="rootParentId" value="swi_folder" onkeyup="generateCode()"
                    class="bg-transparent border-none text-xs font-mono font-bold text-indigo-600 dark:text-indigo-400 focus:outline-none w-24 md:w-32 placeholder-indigo-300 dark:placeholder-indigo-700 transition-colors">
            </div>

            <button onclick="copyCode()" id="copyBtn"
                class="bg-slate-900 hover:bg-slate-800 dark:bg-indigo-600 dark:hover:bg-indigo-500 text-white px-4 py-2 rounded-lg text-xs font-bold transition-all shadow-md hover:shadow-lg flex items-center gap-2">
                <i class="fas fa-code"></i> <span class="hidden sm:inline">Copy Code</span>
            </button>

            <div class="h-6 w-px bg-slate-200 dark:bg-slate-700"></div>

            <!-- Theme Toggle -->
            <button id="themeToggle"
                class="p-2 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors text-slate-600 dark:text-slate-400">
                <!-- Sun Icon -->
                <svg id="sunIcon" class="w-5 h-5 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
                <!-- Moon Icon -->
                <svg id="moonIcon" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M20.354 24.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                </svg>
            </button>
        </div>
    </header>

    <!-- Main Workspace -->
    <div class="flex flex-1 overflow-hidden">

        <!-- Canvas -->
        <div class="flex-1 bg-grid-pattern flex flex-col overflow-hidden relative">
            <div id="visualWorkspace" class="flex-1 overflow-y-auto p-8 pb-32 space-y-12">
                <!-- Content injected by JS -->
            </div>

            <!-- Global Floating Action Button -->
            <div class="absolute bottom-6 left-1/2 transform -translate-x-1/2">
                <button onclick="addTabSet()"
                    class="bg-indigo-600 hover:bg-indigo-500 text-white px-6 py-3 rounded-full shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all flex items-center gap-2 font-bold text-sm">
                    <i class="fas fa-layer-group"></i> New TabSet
                </button>
            </div>
        </div>

        <!-- Code Panel (Right Sidebar) -->
        <div
            class="w-80 bg-slate-50 dark:bg-slate-900 border-l border-slate-200 dark:border-slate-800 flex flex-col shadow-2xl z-30">
            <div
                class="p-3 bg-white dark:bg-slate-950 border-b border-slate-200 dark:border-slate-800 flex justify-between items-center">
                <span class="text-xs font-bold text-slate-400 uppercase tracking-wider">Extended Code Preview</span>
                <div class="flex gap-2">
                    <div class="w-2 h-2 rounded-full bg-red-500"></div>
                    <div class="w-2 h-2 rounded-full bg-yellow-500"></div>
                    <div class="w-2 h-2 rounded-full bg-green-500"></div>
                </div>
            </div>
            <div class="flex-1 relative">
                <textarea id="codeOutput" readonly
                    class="w-full h-full p-4 font-mono text-[10px] bg-slate-50 dark:bg-slate-900 text-emerald-600 dark:text-emerald-400 resize-none focus:outline-none leading-relaxed selection:bg-emerald-100 dark:selection:bg-emerald-900"
                    spellcheck="false"></textarea>
            </div>
        </div>
    </div>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Model ---
        let data = [];

        // --- Actions ---

        function addTabSet() {
            const tsIdx = data.length;
            data.push({
                type: 'TabSet',
                name: 'Tab Set',
                varName: 'ts_' + (tsIdx + 1),
                children: []
            });
            addTab(tsIdx); // Auto-create first tab
        }

        function addTab(tsIdx) {
            const tIdx = data[tsIdx].children.length;
            data[tsIdx].children.push({
                type: 'Tab',
                name: 'Tab ' + (tIdx + 1),
                varName: 'tab_' + (tIdx + 1),
                children: []
            });
            addRow(tsIdx, tIdx); // Auto-create first row
            render();
        }

        function addRow(tsIdx, tIdx) {
            const rIdx = data[tsIdx].children[tIdx].children.length;
            data[tsIdx].children[tIdx].children.push({
                type: 'Row',
                // Telling Name: Row {Number}
                name: 'Row ' + (rIdx + 1),
                varName: 'row_' + (rIdx + 1),
                children: []
            });
            render();
        }

        function addCol(tsIdx, tIdx, rIdx, width = 2) {
            const row = data[tsIdx].children[tIdx].children[rIdx];

            // Calc available space
            let used = row.children.reduce((acc, c) => acc + c.width, 0);
            let available = 6 - used;

            if (available < 1) return;
            if (width > available) width = available;

            row.children.push({
                type: 'Col',
                // Telling Name: [W{width}] Container
                name: `[W\${width}] Container`,
                varName: 'col_' + (row.children.length + 1),
                width: width
            });
            render();
        }

        function updateNameOnResize(col, oldWidth, newWidth) {
            // Regex to match the [W#] pattern at the start
            const prefixRegex = /^\[W\d+\]/;

            if (prefixRegex.test(col.name)) {
                // If the name starts with [W#], update the number
                col.name = col.name.replace(prefixRegex, `[W\${newWidth}]`);
            }
        }

        function resizeCol(path, delta) {
            // Smart Resizing Logic
            const [tsIdx, tIdx, rIdx, cIdx] = path;
            const row = data[tsIdx].children[tIdx].children[rIdx];
            const col = row.children[cIdx];

            const oldWidth = col.width;
            let newWidth = oldWidth;

            // 1. Calculate Constraints
            const currentTotal = row.children.reduce((acc, c) => acc + c.width, 0);
            const spaceLeft = 6 - currentTotal;

            if (delta > 0) {
                // TRYING TO GROW
                if (spaceLeft >= delta) {
                    newWidth += delta;
                } else {
                    // Steal from neighbors
                    const rightNeighbor = row.children[cIdx + 1];
                    const leftNeighbor = row.children[cIdx - 1];

                    if (rightNeighbor && rightNeighbor.width > 1) {
                        updateNameOnResize(rightNeighbor, rightNeighbor.width, rightNeighbor.width - delta);
                        rightNeighbor.width -= delta;
                        newWidth += delta;
                    } else if (leftNeighbor && leftNeighbor.width > 1) {
                        updateNameOnResize(leftNeighbor, leftNeighbor.width, leftNeighbor.width - delta);
                        leftNeighbor.width -= delta;
                        newWidth += delta;
                    }
                }
            } else {
                // TRYING TO SHRINK
                if (col.width > 1) {
                    newWidth += delta;
                }
            }

            if (newWidth !== oldWidth) {
                col.width = newWidth;
                updateNameOnResize(col, oldWidth, newWidth);
                render();
            }
        }

        function updateField(path, field, value) {
            let target = getTarget(path);
            if (target) target[field] = value;
            generateCode();
        }

        function remove(path) {
            if (path.length === 1) data.splice(path[0], 1);
            else if (path.length === 2) data[path[0]].children.splice(path[1], 1);
            else if (path.length === 3) data[path[0]].children[path[1]].children.splice(path[2], 1);
            else if (path.length === 4) data[path[0]].children[path[1]].children[path[2]].children.splice(path[3], 1);
            render();
        }

        function getTarget(path) {
            if (path.length === 1) return data[path[0]];
            if (path.length === 2) return data[path[0]].children[path[1]];
            if (path.length === 3) return data[path[0]].children[path[1]].children[path[2]];
            if (path.length === 4) return data[path[0]].children[path[1]].children[path[2]].children[path[3]];
        }

        // --- Renderer ---

        function render() {
            const workspace = document.getElementById('visualWorkspace');
            workspace.innerHTML = '';

            if (data.length === 0) {
                const emptyState = document.createElement('div');
                emptyState.className = "flex flex-col items-center justify-center h-64 text-slate-300 mt-20";
                emptyState.innerHTML = `
                    <div class="w-24 h-24 rounded-full bg-slate-100 flex items-center justify-center mb-6">
                        <i class="fas fa-cubes text-4xl text-slate-300"></i>
                    </div>
                    <p class="text-lg font-semibold text-slate-400">Your canvas is empty</p>
                    <p class="text-sm">Click "New TabSet" to begin</p>
                `;
                workspace.appendChild(emptyState);
                generateCode();
                return;
            }

            data.forEach((ts, tsIdx) => {
                const tsEl = document.createElement('div');
                tsEl.className = "bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden smooth-transition hover:shadow-md";

                // TabSet Header
                tsEl.innerHTML = `
                    <div class="bg-slate-50 dark:bg-slate-900/50 border-b border-slate-100 dark:border-slate-700 p-4 flex justify-between items-center">
                        <div class="flex items-center gap-4">
                            <span class="text-xs font-bold text-slate-400 uppercase tracking-wider"><i class="fas fa-folder mr-1"></i> TabSet</span>
                            <input type="text" value="\${ts.name}" onchange="updateField([\${tsIdx}], 'name', this.value)" 
                                class="bg-transparent border-b-2 border-transparent hover:border-slate-300 dark:hover:border-slate-600 focus:border-indigo-500 focus:outline-none font-bold text-slate-700 dark:text-slate-200 text-lg w-64 smooth-transition">
                        </div>
                        <button onclick="remove([\${tsIdx}])" class="w-8 h-8 rounded-full hover:bg-red-50 text-slate-300 hover:text-red-500 transition-colors"><i class="fas fa-trash-alt"></i></button>
                    </div>
                `;

                // Tab Nav
                const tabsContainer = document.createElement('div');
                const tabNav = document.createElement('div');
                tabNav.className = "flex px-4 pt-4 gap-2 border-b border-slate-100 dark:border-slate-700 bg-white dark:bg-slate-800";

                ts.children.forEach((tab, tIdx) => {
                    const tabBtn = document.createElement('div');
                    tabBtn.className = "px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-t-lg border-t border-x border-slate-200 dark:border-slate-600 text-sm font-semibold text-slate-600 dark:text-slate-300 flex items-center gap-2 relative group cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-600";
                    tabBtn.innerHTML = `
                        <span>\${tab.name}</span>
                        <button onclick="remove([\${tsIdx}, \${tIdx}])" class="ml-2 text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity"><i class="fas fa-times"></i></button>
                    `;
                    tabNav.appendChild(tabBtn);
                });

                const addTabBtn = document.createElement('button');
                addTabBtn.onclick = () => addTab(tsIdx);
                addTabBtn.className = "px-3 py-2 text-slate-400 hover:text-indigo-600 transition-colors text-sm font-bold";
                addTabBtn.innerHTML = `<i class="fas fa-plus"></i>`;
                tabNav.appendChild(addTabBtn);

                tsEl.appendChild(tabNav);

                // Content
                const contentArea = document.createElement('div');
                contentArea.className = "p-6 space-y-8 bg-slate-50/50 dark:bg-slate-900/30";

                ts.children.forEach((tab, tIdx) => {
                    const tabPage = document.createElement('div');
                    tabPage.className = "relative pl-4 border-l-2 border-indigo-100 dark:border-indigo-900/50";

                    // Tab Header - Edit Name
                    tabPage.innerHTML = `
                        <div class="flex items-center gap-3 mb-4">
                            <span class="text-xs font-bold text-indigo-400 uppercase tracking-widest">TAB:</span>
                            <input type="text" value="\${tab.name}" onchange="updateField([\${tsIdx}, \${tIdx}], 'name', this.value)" 
                                class="bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 hover:border-indigo-300 rounded px-2 py-1 font-bold text-slate-700 dark:text-slate-200 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-100 dark:focus:ring-indigo-900 w-64 smooth-transition shadow-sm">
                        </div>
                    `;

                    // Rows (Tracks)
                    const rowsArea = document.createElement('div');
                    rowsArea.className = "space-y-4";

                    tab.children.forEach((row, rIdx) => {
                        const rowEl = document.createElement('div');
                        rowEl.className = "group relative";

                        // Delete Row Btn
                        const delRowBtn = document.createElement('button');
                        delRowBtn.onclick = () => remove([tsIdx, tIdx, rIdx]);
                        delRowBtn.className = "absolute -left-10 top-1/2 transform -translate-y-1/2 w-6 h-6 flex items-center justify-center rounded-full text-slate-300 hover:bg-red-100 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all";
                        delRowBtn.innerHTML = `<i class="fas fa-minus"></i>`;
                        rowEl.appendChild(delRowBtn);

                        // The Track
                        const track = document.createElement('div');
                        track.className = "h-24 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm flex overflow-hidden";

                        let usedWidth = 0;

                        row.children.forEach((col, cIdx) => {
                            usedWidth += col.width;
                            const colEl = document.createElement('div');
                            colEl.style.flex = `\${col.width} 1 0%`;
                            colEl.className = "relative border-r border-slate-100 dark:border-slate-700 group/col hover:bg-indigo-50/30 dark:hover:bg-indigo-900/20 transition-colors flex flex-col";

                            colEl.innerHTML = `
                                <!-- Resize Handles -->
                                <div class="absolute top-1 right-1 flex gap-1 opacity-0 group-hover/col:opacity-100 transition-opacity z-10">
                                    <button onclick="resizeCol([\${tsIdx}, \${tIdx}, \${rIdx}, \${cIdx}], -1)" class="w-5 h-5 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded text-[10px] hover:bg-indigo-500 hover:text-white dark:text-slate-300">-</button>
                                    <button onclick="resizeCol([\${tsIdx}, \${tIdx}, \${rIdx}, \${cIdx}], 1)" class="w-5 h-5 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded text-[10px] hover:bg-indigo-500 hover:text-white dark:text-slate-300">+</button>
                                    <button onclick="remove([\${tsIdx}, \${tIdx}, \${rIdx}, \${cIdx}])" class="w-5 h-5 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded text-[10px] hover:bg-red-500 hover:text-white text-red-400"><i class="fas fa-times"></i></button>
                                </div>

                                <!-- Center Content -->
                                <div class="flex-1 flex flex-col items-center justify-center p-2 w-full">
                                    <span class="text-2xl font-bold text-slate-200 dark:text-slate-700 group-hover/col:text-indigo-200 dark:group-hover/col:text-indigo-800 transition-colors select-none">\${col.width}</span>
                                    <input type="text" value="\${col.name}" onchange="updateField([\${tsIdx}, \${tIdx}, \${rIdx}, \${cIdx}], 'name', this.value)" 
                                        class="text-center text-xs font-semibold text-slate-500 dark:text-slate-400 bg-transparent focus:bg-white dark:focus:bg-slate-700 focus:ring-2 focus:ring-indigo-100 dark:focus:ring-indigo-900 rounded px-1 w-full focus:outline-none">
                                </div>
                            `;
                            track.appendChild(colEl);
                        });

                        // Add Button
                        if (usedWidth < 6) {
                            const remaining = 6 - usedWidth;
                            const addZone = document.createElement('button');
                            addZone.style.flex = `\${remaining} 1 0%`;
                            addZone.onclick = () => addCol(tsIdx, tIdx, rIdx, remaining > 2 ? 2 : remaining);
                            addZone.className = "group/add relative border-2 border-dashed border-slate-200 dark:border-slate-700 hover:border-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-all flex flex-col items-center justify-center text-slate-300 dark:text-slate-600 hover:text-indigo-500";
                            addZone.innerHTML = `
                                <i class="fas fa-plus-circle text-2xl mb-1 transform group-hover/add:scale-110 transition-transform"></i>
                                <span class="text-xs font-bold uppercase tracking-wide opacity-0 group-hover/add:opacity-100 transition-opacity">Add Container</span>
                            `;
                            track.appendChild(addZone);
                        }

                        rowEl.appendChild(track);
                        rowsArea.appendChild(rowEl);
                    });

                    // New Line
                    const newLineBtn = document.createElement('div');
                    newLineBtn.className = "flex justify-center pt-2";
                    newLineBtn.innerHTML = `
                        <button onclick="addRow(\${tsIdx}, \${tIdx})" class="text-xs font-bold text-slate-300 dark:text-slate-600 hover:text-slate-500 dark:hover:text-slate-400 flex items-center gap-2 px-4 py-1 rounded-full border border-transparent hover:border-slate-200 dark:hover:border-slate-700 hover:bg-white dark:hover:bg-slate-800 transition-all">
                            <i class="fas fa-align-justify"></i> New Line
                        </button>
                    `;
                    rowsArea.appendChild(newLineBtn);

                    tabPage.appendChild(rowsArea);
                    contentArea.appendChild(tabPage);
                });

                tsEl.appendChild(contentArea);
                workspace.appendChild(tsEl);
            });

            generateCode();
        }

        // --- Code Generator ---
        function generateCode() {
            let rootInput = document.getElementById('rootParentId').value || 'swi_folder';
            let mobileStrategy = document.getElementById('mobileStrategy').value;

            let vRootVal;
            if (rootInput.startsWith('t.') || rootInput.startsWith('root.') || rootInput.startsWith('this.')) {
                vRootVal = rootInput;
            } else {
                vRootVal = 't.' + rootInput;
            }

            let c = `/* LAYOUT GENERATED BY CORA */\n`;
            c += `vRoot := \${vRootVal}\n\n`;

            data.forEach((ts, tsIdx) => {
                c += `// --- TabSet: \${ts.name} ---\n`;
                c += `\${ts.varName} := vRoot.add(TabSet, name := '\${ts.name}')\n`;

                ts.children.forEach((tab, tIdx) => {
                    c += `\n    // Tab: \${tab.name}\n`;
                    c += `    \${tab.varName} := \${ts.varName}.add(Tab, name := '\${tab.name}')\n`;

                    tab.children.forEach((row, rIdx) => {
                        // ROW WRAPPER
                        // Row wrappers generally stay full width (6) to maintain vertical flow logic
                        c += `        \${row.varName} := \${tab.varName}.add(Container, name := '\${row.name}', columnsLargeScreen := 6, columnsMediumScreen := 6, columnsSmallScreen := 6)\n`;

                        row.children.forEach((col, cIdx) => {
                            // AUTO-CALCULATE WIDTHS
                            let wLarge = col.width;
                            let wMedium = wLarge; // Tablet usually mirrors desktop (safe default)
                            let wSmall = 6;       // Stack by default

                            if (mobileStrategy === 'grid') {
                                // Grid: Allow 2 columns (size 3) on mobile if possible, else stack
                                wSmall = (wLarge <= 3) ? 3 : 6;
                            } else if (mobileStrategy === 'mirror') {
                                // Mirror: Exact copy
                                wSmall = wLarge;
                            }
                            // 'stack' strategy falls through to default wSmall = 6

                            c += `            \${col.varName} := \${row.varName}.add(Container, name := '\${col.name}', columnsLargeScreen := \${wLarge}, columnsMediumScreen := \${wMedium}, columnsSmallScreen := \${wSmall})\n`;
                        });
                    });
                });
                c += `\n`;
            });
            document.getElementById('codeOutput').value = c;
        }

        function copyCode() {
            const el = document.getElementById('codeOutput');
            el.select();
            document.execCommand('copy');
            const btn = document.getElementById('copyBtn');
            const original = btn.innerHTML;
            btn.innerHTML = `<i class="fas fa-check"></i> Copied!`;
            btn.classList.add('bg-emerald-600');
            setTimeout(() => {
                btn.innerHTML = original;
                btn.classList.remove('bg-emerald-600');
            }, 1500);
        }

        // --- Init ---
        if (data.length === 0) addTabSet();

        // --- Theme Toggle ---
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;
        const sunIcon = document.getElementById('sunIcon');
        const moonIcon = document.getElementById('moonIcon');

        // Check system preference
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            html.classList.add('dark');
            moonIcon.classList.add('hidden');
            sunIcon.classList.remove('hidden');
        }

        themeToggle.addEventListener('click', () => {
            html.classList.toggle('dark');
            moonIcon.classList.toggle('hidden');
            sunIcon.classList.toggle('hidden');
        });

    </script>
</body>

</html>