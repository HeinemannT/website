import{k as F,i as M,l as u,z as s,E as _,F as C,v as $,x as f,B,R as K,q as i,y as T,p as N,m as p,u as l,U as k,V as y,Z as A,G as w,$ as Q}from"./core-vendor-rJyK4pSc.js";import{d as Z}from"./vuedraggable.umd-D6DAezGd.js";import{S as J,_ as X,a as Y}from"./ScriptBuilder-B0ANh3C-.js";import{C as ee}from"./CodeOutputPanel-CKE55Law.js";import{u as L}from"./usePersistentState-CDZ61fLN.js";import{T as O,z as te,X as se,g as D,v as W,B as oe,q as ae,H as re,J as le,K as ne,N as de,O as ie,Q as ue}from"./ui-vendor-BUCNl-D1.js";import"./index-B3_LPi4U.js";const pe={class:"w-full overflow-hidden rounded border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 shadow-sm"},ce={class:"w-full text-sm text-left border-collapse"},be={class:"bg-slate-100 dark:bg-slate-800 text-xs uppercase font-bold text-slate-600 dark:text-slate-400 border-b border-slate-300 dark:border-slate-700"},ge={class:"divide-y divide-slate-200 dark:divide-slate-800 text-slate-700 dark:text-slate-300"},xe={key:0,class:"p-8 text-center text-slate-400 text-xs uppercase tracking-widest font-bold"},he=F({__name:"TablePreview",props:{columns:{},isHierarchy:{type:Boolean},levels:{}},setup(V){const g=V,v=M(()=>g.isHierarchy&&g.levels?g.levels.length===0?[]:g.levels.map((d,r)=>({id:r+100,name:r===0?"Root Loop":`Level ${r} Item`,description:`Source: ${d.source}`,status:d.collapse?"Collapsed":"Expanded",value:1e3*(r+1),indent:d.indent})):[{id:1,name:"Project Alpha",description:"Q1 Key Initiative",status:"Active",value:125e3,indent:0},{id:2,name:"Phase 1: Research",description:"Initial discovery",status:"Done",value:25e3,indent:1},{id:3,name:"Phase 2: Development",description:"Core implementation",status:"In Progress",value:1e5,indent:1},{id:4,name:"Frontend",description:"Vue.js Application",status:"In Progress",value:6e4,indent:2},{id:5,name:"Backend",description:"API Services",status:"Pending",value:4e4,indent:2}]),b=(d,r)=>{const c=d.prop.toLowerCase();if(r[c]!==void 0)return r[c];const x=String(r.id).padStart(2,"0");return`_${d.prop} ${x}_`},h=d=>{const r=[];return d.align==="center"&&r.push("text-center"),d.align==="right"&&r.push("text-right"),d.styles.includes("hidden")&&r.push("opacity-30 bg-slate-100 dark:bg-slate-800 line-through decoration-slate-400"),d.styles.includes("separator")&&r.push("border-r-4 border-slate-300 dark:border-slate-600"),r.join(" ")},m=d=>{const r=[];return d.align==="center"&&r.push("text-center"),d.align==="right"&&r.push("text-right"),d.styles.includes("bold")&&r.push("font-bold"),d.styles.includes("hidden")&&r.push("opacity-30 bg-slate-50 dark:bg-slate-900/50"),d.styles.includes("separator")&&r.push("border-r-4 border-slate-300 dark:border-slate-600"),d.styles.includes("wrapped")?r.push("whitespace-normal break-words"):r.push("whitespace-nowrap"),r.join(" ")},U=(d,r,c)=>{const x=Number(r.indent)||0;return g.isHierarchy&&c===0&&x>0?{paddingLeft:`${1+x*1.5}rem`}:{}};return(d,r)=>(i(),u("div",pe,[s("table",ce,[s("thead",be,[s("tr",null,[(i(!0),u(C,null,$(V.columns,c=>(i(),u("th",{key:c.id,class:f(["px-4 py-3 tracking-wider transition-colors border-r last:border-r-0 border-slate-200 dark:border-slate-700",h(c)])},B(c.header||"(No Header)"),3))),128))])]),s("tbody",ge,[(i(!0),u(C,null,$(v.value,c=>(i(),u("tr",{key:c.id,class:"transition-colors even:bg-slate-50 dark:even:bg-slate-800/50 hover:bg-slate-100 dark:hover:bg-slate-700/50"},[(i(!0),u(C,null,$(V.columns,(x,P)=>(i(),u("td",{key:x.id,class:f(["px-4 py-2.5 transition-all border-r last:border-r-0 border-slate-200 dark:border-slate-700",m(x)+(String(b(x,c)).startsWith("_")?" italic text-slate-400":"")]),style:K(U(x,c,P))},B(String(b(x,c)).replace(/_/g,"")),7))),128))]))),128))])]),V.columns.length===0?(i(),u("div",xe," No Columns Defined ")):_("",!0)]))}}),fe={class:"h-full flex flex-col overflow-hidden font-sans"},me={class:"flex p-0.5 bg-slate-100 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700"},ve=["onClick"],ke={class:"flex-1 flex flex-row overflow-hidden"},we={class:"w-80 md:w-96 shrink-0 flex flex-col border-r border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800 z-10 shadow-[4px_0_24px_-12px_rgba(0,0,0,0.1)]"},ye={class:"p-4 border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-800 shrink-0"},_e={class:"grid grid-cols-1 gap-3"},Ce={key:0},$e={class:"flex items-center bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md overflow-hidden focus-within:ring-2 focus-within:ring-indigo-100 dark:focus-within:ring-indigo-900 transition-shadow"},Ve={class:"flex items-center bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md overflow-hidden focus-within:ring-2 focus-within:ring-indigo-100 dark:focus-within:ring-indigo-900 transition-shadow"},Se={class:"flex-1 overflow-y-auto p-4 space-y-6"},Le={key:0,class:"space-y-2"},Ue={class:"text-[10px] uppercase font-bold text-slate-700 dark:text-slate-300 tracking-wider flex items-center gap-2 mb-2"},Te={class:"space-y-1"},Ne=["onUpdate:modelValue"],Pe=["onUpdate:modelValue"],je={class:"w-6 flex justify-center"},He=["onUpdate:modelValue"],Ae=["onClick"],Be={key:1,class:"w-4"},Ee={class:"space-y-3"},Re={class:"flex justify-between items-end border-b border-slate-200 dark:border-slate-800 pb-2"},Ie={class:"text-[10px] uppercase font-bold text-slate-500 dark:text-slate-400 tracking-wider flex items-center gap-2"},ze={class:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm hover:shadow-md transition-shadow group"},Oe={class:"flex items-center p-2 gap-2"},De={class:"drag-handle cursor-move text-slate-300 hover:text-slate-500"},We={class:"flex-1 grid grid-cols-1 gap-1.5"},Fe=["onUpdate:modelValue"],Me=["onUpdate:modelValue","onInput"],qe={class:"flex flex-col border-l border-slate-100 dark:border-slate-700 pl-2 gap-1"},Ge=["onClick"],Ke=["onClick"],Qe={key:0,class:"border-t border-slate-100 dark:border-slate-700 p-3 bg-slate-50 dark:bg-slate-900/50 rounded-b-lg grid grid-cols-2 gap-3"},Ze={class:"flex bg-white dark:bg-slate-800 rounded border border-slate-200 dark:border-slate-700 p-0.5"},Je=["onClick"],Xe=["onUpdate:modelValue"],Ye={class:"col-span-2 flex gap-1.5 flex-wrap pt-1"},et=["onClick"],tt=["onClick"],st=["onClick"],ot=["onClick"],at=["onClick"],rt={class:"flex-1 overflow-auto relative flex flex-col p-12"},lt={class:"mx-auto w-full max-w-4xl"},gt=F({__name:"TableBuilder",setup(V){const g=L("table:method_v3",2),v=L("table:sourceList_v3","vListOfObjects"),b=L("table:tableVar_v3","vTable"),h=L("table:columns_v3",[{id:"1",header:"New Column",prop:"property",width:"",align:"left",styles:[],format:""}]),m=L("table:levels_v3",[{id:"root",source:"vList",indent:0,collapse:!1}]),U=()=>crypto.randomUUID(),d=o=>{g.value=Number(o),o===4&&m.value.length===0&&x()},r=()=>{h.value.push({id:U(),header:"New Column",prop:"property",width:"",align:"left",styles:[],format:""})},c=o=>{h.value.splice(o,1)},x=()=>{const o=m.value.length;m.value.push({id:U(),source:o===0?"vList":`item_${o}.children`,indent:o,collapse:!1})},P=o=>{m.value.splice(o,1)},q=o=>{g.value===1&&o.prop&&(o.header=`[${o.prop}.name]`)},E=(o,e,t)=>{if(e>=m.value.length)return;const n=m.value[e],a=`item_${e+1}`;o.add(`${n.source}.foreach(${a}:`),o.indent();const z=h.value.map(H=>/^[a-zA-Z0-9_]+$/.test(H.prop)?`${a}.${H.prop}`:H.prop).join(", ");let j=`${b.value}.addRow(${a}, ${z})`;n.indent>0&&(j+=`.indent(${n.indent})`),n.collapse&&(j+=".collapse()"),o.add(j),E(o,e+1),o.outdent(),o.add(")")},G=M(()=>{const o=Number(g.value),e=new J("Table created by CTools");if(o===3||o===4)e.add(`${b.value} := createTable()`),h.value.forEach(t=>{let n=`${b.value}.addColumn("${I(t.header)}", "")`;n+=R(t),e.add(n)});else return e.assign(b.value,`${v.value}.table()`),h.value.forEach(t=>{let n="";o===1?n=`${b.value}.add(${v.value.startsWith("v")||v.value.startsWith("l"),"item"}.${t.prop})`:n=`${b.value}.addColumn("${I(t.header)}", item.${t.prop})`,n+=R(t),e.add(n)}),e.toString();return e.addNewLine(),e.addComment("--- Population ---"),o===3?(e.add(`${v.value}.foreach(item:`),e.indent(),e.add(`${b.value}.addRow()`),h.value.forEach(t=>{e.add(`.addCell(item.${t.prop})`)}),e.outdent(),e.add(")")):o===4&&(e.addComment("--- Hierarchy Population ---"),E(e,0)),e.addNewLine(),e.add(b.value),e.toString()}),R=o=>{let e="";o.width&&(e+=`.width(${o.width})`),o.align&&o.align!=="left"&&(e+=`.align(alignment.${o.align.toUpperCase()})`);let t=[],n=[];return o.styles.forEach(a=>{a==="hidden"?n.push(".hidden()"):a==="readonly"?n.push(".readonly()"):a==="separator"?t.push("'separator'"):a==="wrapped"?t.push("'wrapped'"):a==="bold"?t.push("style.bold"):t.push(`'${a}'`)}),t.length>0&&(e+=`.style(${t.join(", ")})`),o.format&&(e+=`.${o.format}`),n.length>0&&(e+=n.join("")),e},I=o=>o?o.replace(/"/g,'\\"'):"",S=(o,e)=>{o.styles.includes(e)?o.styles=o.styles.filter(t=>t!==e):o.styles.push(e)};return(o,e)=>(i(),T(Y,{"sidebar-class":"w-80 border-l border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-800 shadow-xl z-20"},{sidebar:N(()=>[p(ee,{title:"Extended Code",code:G.value},null,8,["code"])]),main:N(()=>[s("div",fe,[p(X,{title:"Table Builder",icon:l(O),"icon-color":"text-emerald-600 dark:text-emerald-400"},{center:N(()=>[s("div",me,[(i(),u(C,null,$([1,2,3,4],t=>s("button",{key:t,onClick:n=>d(t),class:f([l(g)===t?"bg-white dark:bg-slate-600 shadow-sm text-indigo-600 dark:text-indigo-300 font-bold":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300","px-3 py-1.5 text-[10px] uppercase tracking-wider rounded transition-all"])},B(t===1?"Simple":t===2?"Headers":t===3?"Add Row":"Hierarchy"),11,ve)),64))])]),_:1},8,["icon"]),s("div",ke,[s("div",we,[s("div",ye,[s("div",_e,[l(g)!==4?(i(),u("div",Ce,[e[4]||(e[4]=s("label",{class:"text-[10px] uppercase font-bold text-slate-500 dark:text-slate-400 block mb-1"},"Source List",-1)),s("div",$e,[e[3]||(e[3]=s("span",{class:"pl-2 text-[10px] font-mono font-medium text-indigo-400"},":=",-1)),k(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>A(v)?v.value=t:null),class:"w-full bg-transparent border-none text-xs font-mono font-medium px-2 py-1.5 focus:outline-none"},null,512),[[y,l(v)]])])])):_("",!0),s("div",null,[e[6]||(e[6]=s("label",{class:"text-[10px] uppercase font-bold text-slate-500 dark:text-slate-400 block mb-1"},"Output Variable",-1)),s("div",Ve,[e[5]||(e[5]=s("span",{class:"pl-2 text-[10px] font-mono font-medium text-indigo-400"},":=",-1)),k(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>A(b)?b.value=t:null),class:"w-full bg-transparent border-none text-xs font-mono font-medium px-2 py-1.5 focus:outline-none"},null,512),[[y,l(b)]])])])])]),s("div",Se,[l(g)===4?(i(),u("div",Le,[s("label",Ue,[p(l(te),{class:"w-3 h-3"}),e[7]||(e[7]=w(" Hierarchy Levels ",-1))]),s("div",Te,[e[8]||(e[8]=s("div",{class:"flex gap-2 px-2 pb-1"},[s("span",{class:"flex-1 text-[10px] font-bold text-slate-500 uppercase"},"Source"),s("span",{class:"w-10 text-center text-[10px] font-bold text-slate-500 uppercase"},"Indent"),s("span",{class:"w-6 text-center text-[10px] font-bold text-slate-500 uppercase"},"Col"),s("span",{class:"w-4"})],-1)),(i(!0),u(C,null,$(l(m),(t,n)=>(i(),u("div",{key:t.id,class:"flex items-center gap-2 group bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md p-1.5 shadow-sm hover:border-slate-300 transition-colors"},[s("div",{class:f(["w-1.5 h-1.5 rounded-full bg-slate-200 dark:bg-slate-600 shrink-0",n===0?"bg-indigo-400":""])},null,2),k(s("input",{"onUpdate:modelValue":a=>t.source=a,class:"flex-1 min-w-0 bg-transparent text-[10px] font-mono text-slate-700 dark:text-slate-300 focus:outline-none placeholder-slate-300",placeholder:"Source..."},null,8,Ne),[[y,t.source]]),k(s("input",{type:"number","onUpdate:modelValue":a=>t.indent=a,class:"w-10 text-center bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded px-1 py-0.5 text-[10px] font-bold text-slate-600 focus:outline-none"},null,8,Pe),[[y,t.indent]]),s("div",je,[k(s("input",{type:"checkbox","onUpdate:modelValue":a=>t.collapse=a,class:"rounded text-indigo-500 w-3 h-3 focus:ring-0"},null,8,He),[[Q,t.collapse]])]),n>0?(i(),u("button",{key:0,onClick:a=>P(n),class:"w-4 flex justify-center text-slate-400 hover:text-red-500 transition-colors"},[p(l(se),{class:"w-3 h-3"})],8,Ae)):(i(),u("div",Be))]))),128))]),s("button",{onClick:x,class:"w-full py-2 border border-dashed border-slate-300 dark:border-slate-700 hover:border-indigo-400 rounded-lg text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 text-[10px] font-bold transition-all flex items-center justify-center gap-2 group mt-2 bg-slate-50/50 hover:bg-white"},[p(l(D),{class:"w-3 h-3"}),e[9]||(e[9]=w(" Add Nested Level ",-1))])])):_("",!0),s("div",Ee,[s("div",Re,[s("label",Ie,[p(l(O),{class:"w-3 h-3"}),e[10]||(e[10]=w(" Columns ",-1))]),s("button",{class:"text-[10px] text-indigo-600 dark:text-indigo-400 font-bold hover:text-indigo-800 flex items-center gap-1 bg-indigo-50 dark:bg-indigo-900/20 px-2 py-1 rounded-full transition-colors",onClick:r},[p(l(D),{class:"w-3 h-3"}),e[11]||(e[11]=w(" Add Column ",-1))])]),p(l(Z),{modelValue:l(h),"onUpdate:modelValue":e[2]||(e[2]=t=>A(h)?h.value=t:null),"item-key":"id",handle:".drag-handle",class:"space-y-2"},{item:N(({element:t,index:n})=>[s("div",ze,[s("div",Oe,[s("div",De,[p(l(W),{class:"w-4 h-4"})]),s("div",We,[k(s("input",{"onUpdate:modelValue":a=>t.header=a,placeholder:"Header",class:"bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded px-2 py-1 text-xs font-bold focus:ring-1 focus:ring-indigo-100 focus:outline-none"},null,8,Fe),[[y,t.header]]),k(s("input",{"onUpdate:modelValue":a=>t.prop=a,placeholder:"Property",onInput:a=>q(t),class:"bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded px-2 py-1 text-[10px] font-mono text-slate-600 dark:text-slate-400 focus:ring-1 focus:ring-indigo-100 focus:outline-none"},null,40,Me),[[y,t.prop]])]),s("div",qe,[s("button",{onClick:a=>t.showSettings=!t.showSettings,class:f([t.showSettings?"text-indigo-600 bg-indigo-50 dark:bg-indigo-900/30":"text-slate-400 hover:text-slate-600","p-1 rounded transition-colors"])},[p(l(oe),{class:"w-3 h-3"})],10,Ge),s("button",{onClick:a=>c(n),class:"p-1 text-slate-300 hover:text-red-500 transition-colors"},[p(l(ae),{class:"w-3 h-3"})],8,Ke)])]),t.showSettings?(i(),u("div",Qe,[s("div",null,[e[12]||(e[12]=s("label",{class:"text-[10px] uppercase font-bold text-slate-500 dark:text-slate-400 block mb-1"},"Alignment",-1)),s("div",Ze,[(i(),u(C,null,$(["left","center","right"],a=>s("button",{key:a,onClick:z=>t.align=a,class:f([t.align===a?"bg-slate-100 dark:bg-slate-700 text-indigo-600 dark:text-indigo-400":"text-slate-400","flex-1 flex justify-center py-0.5 rounded transition-colors"])},[a==="left"?(i(),T(l(re),{key:0,class:"w-3 h-3"})):_("",!0),a==="center"?(i(),T(l(le),{key:1,class:"w-3 h-3"})):_("",!0),a==="right"?(i(),T(l(ne),{key:2,class:"w-3 h-3"})):_("",!0)],10,Je)),64))])]),s("div",null,[e[13]||(e[13]=s("label",{class:"text-[10px] uppercase font-bold text-slate-500 dark:text-slate-400 block mb-1"},"Format",-1)),k(s("input",{"onUpdate:modelValue":a=>t.format=a,placeholder:"decimals(2)",class:"w-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded px-1.5 py-0.5 text-[10px] font-mono outline-none"},null,8,Xe),[[y,t.format]])]),s("div",Ye,[s("button",{onClick:a=>S(t,"bold"),class:f([t.styles.includes("bold")?"bg-indigo-100 text-indigo-700 border-indigo-200":"bg-white border-slate-200 text-slate-500","px-2 py-1 rounded text-[10px] font-bold border flex items-center gap-1 transition-all"])},"B",10,et),s("button",{onClick:a=>S(t,"hidden"),class:f([t.styles.includes("hidden")?"bg-indigo-100 text-indigo-700 border-indigo-200":"bg-white border-slate-200 text-slate-500","px-2 py-1 rounded text-[10px] font-bold border flex items-center gap-1 transition-all"])},[p(l(de),{class:"w-3 h-3"}),e[14]||(e[14]=w("Hidden",-1))],10,tt),s("button",{onClick:a=>S(t,"separator"),class:f([t.styles.includes("separator")?"bg-indigo-100 text-indigo-700 border-indigo-200":"bg-white border-slate-200 text-slate-500","px-2 py-1 rounded text-[10px] font-bold border flex items-center gap-1 transition-all"])},[p(l(W),{class:"w-3 h-3"}),e[15]||(e[15]=w("Separator",-1))],10,st),s("button",{onClick:a=>S(t,"wrapped"),class:f([t.styles.includes("wrapped")?"bg-indigo-100 text-indigo-700 border-indigo-200":"bg-white border-slate-200 text-slate-500","px-2 py-1 rounded text-[10px] font-bold border flex items-center gap-1 transition-all"])},[p(l(ie),{class:"w-3 h-3"}),e[16]||(e[16]=w("Wrap",-1))],10,ot),s("button",{onClick:a=>S(t,"readonly"),class:f([t.styles.includes("readonly")?"bg-indigo-100 text-indigo-700 border-indigo-200":"bg-white border-slate-200 text-slate-500","px-2 py-1 rounded text-[10px] font-bold border flex items-center gap-1 transition-all"])},[p(l(ue),{class:"w-3 h-3"}),e[17]||(e[17]=w("Readonly",-1))],10,at)])])):_("",!0)])]),_:1},8,["modelValue"])])])]),s("div",rt,[s("div",lt,[p(he,{columns:l(h),"is-hierarchy":l(g)===4,levels:l(m)},null,8,["columns","is-hierarchy","levels"])])])])])]),_:1}))}});export{gt as default};
